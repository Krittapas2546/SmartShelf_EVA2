<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Shelf UI</title>
    <!-- 1. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå CSS ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å -->
    <!-- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå CSS ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å -->
    <link rel="stylesheet" href="/static/css/ui_styles.css">
</head>
<body>
    <!-- 2. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• -->

    <!-- View 1: ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß -->
    <div id="queueSelectionView" style="display: none; height: 100vh; overflow: hidden; position: relative;">

        <!-- üîΩ ADD THIS ENTIRE BLOCK üîΩ -->
        <div class="barcode-scanner-container">
            <input type="text" id="lot-no-input" placeholder="üîç Ready for Barcode Scanner - Scan or type Lot No.">
            <button class="back-to-main-btn" onclick="handleLotSearch()" style="position: static; top: auto; left: auto; z-index: auto;">Find Job</button>
        </div>
        <!-- üîº END OF ADDED BLOCK üîº -->

        <!-- ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏ù‡∏±‡πà‡∏á -->
        <div class="queue-container" style="height: calc(100vh - 150px); overflow-y: auto;">
            <!-- ‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢: ‡∏á‡∏≤‡∏ô‡∏ß‡∏≤‡∏á (Place) -->
            <div class="queue-section place-section">
                <ul id="placeQueueContainer" class="queue-list">
                    <!-- Place jobs will be injected here -->
                </ul>
            </div>

            <!-- ‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤: ‡∏á‡∏≤‡∏ô‡∏´‡∏¢‡∏¥‡∏ö (Pick) -->
            <div class="queue-section pick-section">
                <ul id="pickQueueContainer" class="queue-list">
                    <!-- Pick jobs will be injected here -->
                </ul>
            </div>
        </div>

        <!-- ‡πÄ‡∏Å‡πá‡∏ö container ‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö backward compatibility -->
        <ul id="queueListContainer" style="display: none;">
            <!-- Job items will be injected here by JavaScript -->
        </ul>

        <!-- Back to Main Button - ‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -->
        <button id="backToMainBtn" class="back-to-main-btn" onclick="goBackToMain()">
            Back
        </button>
    </div>

    <!-- View 2: ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Active Job) -->
    <main id="mainView" style="display: none; position: relative;">
        <!-- üîΩ ADD HIDDEN INPUT FOR BARCODE SCANNER üîΩ -->
        <input type="text" id="barcode-scanner-input" style="position: absolute; left: -9999px; opacity: 0;" placeholder="Barcode Scanner Input">
        <!-- üîº END OF ADDED INPUT üîº -->
        
        <div class="main-container">
            <!-- Shelf Panel (‡∏Å‡∏•‡∏≤‡∏á) -->
            <div class="shelf-panel">
                <h2 id="shelfTitle">Shelf</h2>
                <div class="shelf-frame"><div class="shelf-grid" id="shelfGrid"></div></div>
            </div>
            
            <!-- Cell Preview Panel (‡∏Ç‡∏ß‡∏≤) -->
            <div class="cell-preview-container" id="cellPreviewContainer">
                <h3>Cell Preview</h3>
                <div class="cell-preview-content" id="cellPreviewContent">
                    <p>Select a cell to view details</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Back Button - Global button ‡∏≠‡∏¢‡∏π‡πà‡∏°‡∏∏‡∏°‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏™‡∏°‡∏≠ -->
    <button id="backToQueueBtn" class="back-to-main-btn" onclick="goBackToQueue()" style="
        position: fixed;
        top: 20px;
        left: 20px;
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 20px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        z-index: 1001;
        display: none;
    ">
        ‚Üê Back
    </button>

    <!-- Jobs Waiting Button - Global button ‡∏≠‡∏¢‡∏π‡πà‡∏°‡∏∏‡∏°‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ ‡∏ñ‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° Back -->
    <div id="queueNotificationBtn" onclick="goToQueueSelection()" style="
        position: fixed;
        top: 20px;
        left: 20px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 20px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        z-index: 1000;
        display: none;
        align-items: center;
        gap: 8px;
    ">
        <span class="queue-icon"></span>
        <span class="queue-count-badge" id="queueCountBadge" style="
            background: #dc3545;
            color: white;
            border-radius: 50%;
            padding: 2px 8px;
            font-size: 0.8em;
            min-width: 20px;
            text-align: center;
        ">0</span>
        <span class="queue-text">Jobs Waiting</span>
    </div>

    <!-- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå JavaScript ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡∏Ñ‡∏ß‡∏£‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡πâ‡∏≤‡∏¢ body) -->
    <script src="/static/js/ui_logic.js"></script>
</body>
</html>